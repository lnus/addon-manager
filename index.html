<script>
    let windowControl = require("./modules/windowManager.js")
    let curse = require("./modules/getCurse.js")
    let cheerio = require("cheerio")
</script>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>AddonManager</title>
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <div class="container">

        <header>
            <strong><span>ADDON</span>MANAGER</strong>
            <nav>
                <ul>
                    <li><img src="./assets/btn-settings.svg" id="settings" onclick="alert('settings not added yet lmao')"></li>
                    <li><img src="./assets/btn-min.svg" id="min" onclick="windowControl.minimize()"></li>
                    <li><img src="./assets/btn-close.svg" onclick="windowControl.close()"></li>
                </ul>
            </nav>
        </header>

        <input type="text" id="search" placeholder="Addon name...">

        <main>
            <div class="addonContainer">
                <ul id="addonUL" class="addonList">

                </ul>
            </div>
        </main>
    </div>
</body>

</html>

<script>
    var input = document.getElementById("search")
    var addonList = document.getElementById("addonUL")

    input.addEventListener("keyup", (event) => {
        results = []

        if (event.keyCode === 13) {
            while(addonList.firstChild){
                addonList.removeChild(addonList.firstChild)
            }

            results = curse.search(input.value)

            setTimeout(() => {
                results.forEach(result => {
                    var li = document.createElement("li")
                    li.appendChild(document.createTextNode(result.title))
                    addonList.appendChild(li)
                });
            }, 1200)
        }
    })
</script>